
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Test Page</title>
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    </head>
<body>
    <p>test page</p>
    <a href="javascript:;" st_title="Test with encoding" st_url="http://abcantuangco.github.io/test.html" class="btn fb-encoded" >test with encoding</a>
    <a href="javascript:;" st_title="Test without encoding" st_url="http://abcantuangco.github.io/test.html" class="btn fb-notencoded" >test without encoding</a>
    <script>
        $(document).ready(function(){
            $('.btn.fb-encoded')
                .unbind()
                .on('click',function(){
                    var btnTitle = $(this).closest('li').attr("st_title");
                    var btnUrl = $(this).closest('li').attr("st_url");
                    var message = encodeURIComponent(btnTitle) + encodeURIComponent(" - ") + encodeURIComponent(btnUrl);
                    var messengerUrl = "fb-messenger://share?link=" + message;
                    window.location.href = messengerUrl;
            });
            $('.btn.fb-notencoded')
                .unbind()
                .on('click',function(){
                    var btnTitle = $(this).closest('li').attr("st_title");
                    var btnUrl = $(this).closest('li').attr("st_url");
                    var message = encodeURIComponent(btnTitle) + " - " + encodeURIComponent(btnUrl);
                    var messengerUrl = "fb-messenger://share?link=" + message;
                    window.location.href = messengerUrl;
            });
        });
    </script>
</body>
</html>
